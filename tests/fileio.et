import vec;
import fs;
import os;

fn write() {
	f = fopen( "some", "w" );

	if !f.is_open() {
		println( 'failed to open file' );
	} else {
		for x = 0; x < 20; x += 1 {
			f.write( x, ': hi there\n' );
		}
	}
}

fn read() {
	f = fopen( "some", "r" );

	if !f.is_open() {
		println( 'failed to open file' );
	} else {
		s = "";
		for ; f.read( s ); {
			println( 'recvd: ', s );
		}
	}
}

fn read_all() {
	f = fopen( "some", "r" );

	if !f.is_open() {
		println( 'failed to open file' );
	} else {
		s = [];
		if f.read_all( s ) {
			sz = s.len();
			for i = 0; i < sz; i += 1 {
				println( '--> ', s[ i ] );
			}
		} else {
			println( 'nothing to read :(' );
		}
	}
}

write();
read();
read_all();
exit( os.exec( 'rm some' ) );